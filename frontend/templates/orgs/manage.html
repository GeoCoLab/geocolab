{% extends 'base.html' %}

{% set local_sheets=['table.css'] %}

{% block content %}
  <h2>Managed organisations</h2>

  <div class="grid grid-cols-2">
    {% for org in current_user.managed_orgs %}
      <div class="org-card m-4 p-4 border-secondary-darkest border-2">
        <div class="flex items-center">
          <h3 class="text-primary-dark flex-grow">{{ org.name }}</h3>
          <a href="{{ url_for('orgs.edit', org_id=org.id) }}">
            <i class="fa-solid fa-pencil mr-2"></i>
            <span>Edit</span>
          </a>
        </div>
        <div class="detail-container mb-8">
          <div class="detail-row">
            <span class="detail-row-header">ROR ID</span>
            <span>{{ org.ror_id }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-row-header">Location</span>
            <span>{{ org.country|country_name }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-row-header">Facilities</span>
            <span>{{ org.facilities|map(attribute='name')|join('; ') }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-row-header">Managers</span>
            <span>{{ org.managers|map(attribute='name')|join('; ') }}</span>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>



{% endblock %}
